<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<title>Quiz-Aventure Viking</title>
<link rel="stylesheet" href="style.css">
</head>
<body>

<div id="game">
  <h1>Quiz-Aventure Viking üåü</h1>
  <img id="character-img" src="" alt="" class="character">
  <div id="text">Bienvenue dans l‚Äôaventure ! Clique sur commencer.</div>
  <div id="choices"></div>
  <button id="start-btn">Commencer</button>
  <div id="status"></div>
</div>

<!-- Conteneur musique YouTube -->
<div id="music-container">
  <iframe id="viking-music" width="300" height="150"
    src="https://www.youtube.com/embed/kKAY7YaBVWM?autoplay=1&loop=1&playlist=kKAY7YaBVWM&controls=0"
    frameborder="0" allow="autoplay; encrypted-media" allowfullscreen>
  </iframe>
</div>

<!-- Contr√¥les musique -->
<div id="music-controls">
  <button id="play-btn">‚ñ∂Ô∏è Lecture</button>
  <button id="pause-btn">‚è∏Ô∏è Pause</button>
</div>

<script>
// Contr√¥le musique YouTube
const playBtn = document.getElementById('play-btn');
const pauseBtn = document.getElementById('pause-btn');
const musicFrame = document.getElementById('viking-music');

playBtn.onclick = () => {
  musicFrame.contentWindow.postMessage('{"event":"command","func":"playVideo","args":""}', '*');
};

pauseBtn.onclick = () => {
  musicFrame.contentWindow.postMessage('{"event":"command","func":"pauseVideo","args":""}', '*');
};

// Aventure
const adventure = [
  { text:"Tu arrives dans une for√™t viking. Un guerrier bloque le chemin.", character:"https://i.imgur.com/Ox6T3gO.png", question:"Capitale de la France ?", choices:[{text:"Paris",correct:true},{text:"Londres",correct:false},{text:"Berlin",correct:false},{text:"Madrid",correct:false}]},
  { text:"Tu franchis un pont suspendu.", character:"https://i.imgur.com/Ox6T3gO.png", question:"2 + 2 * 2 = ?", choices:[{text:"6",correct:true},{text:"8",correct:false},{text:"4",correct:false},{text:"10",correct:false}]},
  { text:"Un sphinx viking te pose une derni√®re question.", character:"https://i.imgur.com/Xk2V8wU.png", question:"Plus grand oc√©an ?", choices:[{text:"Atlantique",correct:false},{text:"Pacifique",correct:true},{text:"Indien",correct:false},{text:"Arctique",correct:false}]}
];

let currentScene = 0;
let score = 0;

const textEl = document.getElementById('text');
const choicesEl = document.getElementById('choices');
const startBtn = document.getElementById('start-btn');
const statusEl = document.getElementById('status');
const characterImg = document.getElementById('character-img');

function fadeOutIn(element, newContent){
  element.style.opacity=0;
  setTimeout(()=>{
    element.innerHTML=newContent;
    element.style.opacity=1;
  },300);
}

function showScene(sceneIndex){
  const scene = adventure[sceneIndex];
  fadeOutIn(textEl, scene.text + "<br>" + scene.question);
  characterImg.src = scene.character;
  characterImg.style.opacity = 0;
  setTimeout(()=>{characterImg.style.opacity = 1;},300);

  choicesEl.innerHTML = "";
  scene.choices.forEach(choice=>{
    const btn=document.createElement('button');
    btn.textContent = choice.text;
    btn.className='choice';
    btn.onclick = ()=>{
      if(choice.correct) score++;
      currentScene++;
      if(currentScene<adventure.length) showScene(currentScene);
      else {
        fadeOutIn(textEl,"Fin de l'aventure ! Score: "+score+"/"+adventure.length);
        choicesEl.innerHTML="";
        startBtn.style.display="block";
      }
    }
    choicesEl.appendChild(btn);
  });
  statusEl.textContent="Score: "+score;
}

startBtn.onclick = ()=>{
  startBtn.style.display="none";
  currentScene=0;
  score=0;
  showScene(currentScene);
}
</script>
</body>
</html>
